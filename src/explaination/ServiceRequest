Luá»“ng hoáº¡t Ä‘á»™ng trong thá»±c táº¿
HÃ£y tÆ°á»Ÿng tÆ°á»£ng má»™t luá»“ng cá»¥ thá»ƒ: KhÃ¡ch á»Ÿ mÃ¡y 5 (COM005) muá»‘n mua 1 lon Coca.

BÆ°á»›c 1: KhÃ¡ch hÃ ng (Táº¡i mÃ¡y 5)

KhÃ¡ch hÃ ng Ä‘ang trong phiÃªn chÆ¡i (session_id = "USE123", customer_id = "CUS001").

Há» báº¥m vÃ o nÃºt "Gá»i dá»‹ch vá»¥" -> "Äáº·t hÃ ng" -> "Coca Cola" -> "Sá»‘ lÆ°á»£ng: 1".

BÆ°á»›c 2: Há»‡ thá»‘ng (Táº¡o yÃªu cáº§u)

Ngay khi khÃ¡ch báº¥m "XÃ¡c nháº­n", pháº§n má»m cá»§a báº¡n sáº½ INSERT má»™t dÃ²ng má»›i vÃ o báº£ng ServiceRequest.

DÃ²ng Ä‘Ã³ sáº½ cÃ³ dá»¯ liá»‡u:

request_id: "SER001" (ID má»›i)

session_id: "USE123" (Äá»ƒ biáº¿t yÃªu cáº§u nÃ y thuá»™c phiÃªn chÆ¡i nÃ o)

customer_id: "CUS001" (Äá»ƒ biáº¿t ai yÃªu cáº§u)

employee_id: NULL (ChÆ°a ai xá»­ lÃ½ yÃªu cáº§u nÃ y)

type: "ProductPurchase" (Loáº¡i yÃªu cáº§u lÃ  mua hÃ ng)

product_id: "PRO-COCA" (MÃ³n hÃ ng há» muá»‘n)

created_at: (Giá» hiá»‡n táº¡i)

status: "Pending" (Tráº¡ng thÃ¡i: "Äang chá»")

BÆ°á»›c 3: NhÃ¢n viÃªn (Táº¡i quáº§y)

Pháº§n má»m cá»§a nhÃ¢n viÃªn liÃªn tá»¥c kiá»ƒm tra báº£ng ServiceRequest (hoáº·c CSDL bÃ¡o cÃ³ báº£n ghi má»›i).

NÃ³ tháº¥y má»™t yÃªu cáº§u "Pending" -> "MÃ¡y 5 (CUS001) gá»i 1 Coca Cola".

Má»™t nhÃ¢n viÃªn (vÃ­ dá»¥: employee_id = "EMP002") tháº¥y yÃªu cáº§u, báº¥m "Cháº¥p nháº­n".

BÆ°á»›c 4: NhÃ¢n viÃªn (Xá»­ lÃ½)

NhÃ¢n viÃªn "EMP002" láº¥y 1 lon Coca trong kho.

Mang Ä‘áº¿n mÃ¡y 5 cho khÃ¡ch "CUS001".

(TÃ¹y chá»n: Thu tiá»n máº·t ngay, hoáº·c (phá»• biáº¿n hÆ¡n) lÃ  cá»™ng tiá»n vÃ o phiÃªn chÆ¡i cá»§a khÃ¡ch).

BÆ°á»›c 5: Há»‡ thá»‘ng (Cáº­p nháº­t yÃªu cáº§u)

Sau khi giao hÃ ng xong, nhÃ¢n viÃªn "EMP002" báº¥m "HoÃ n thÃ nh" trÃªn pháº§n má»m cá»§a mÃ¬nh.

Há»‡ thá»‘ng sáº½ UPDATE láº¡i dÃ²ng "SER001" trong báº£ng ServiceRequest:

employee_id: "EMP002" (Giá» chÃºng ta biáº¿t ai Ä‘Ã£ xá»­ lÃ½)

status: "Completed" (Tráº¡ng thÃ¡i: "ÄÃ£ xong")

Khi status = "Completed", yÃªu cáº§u nÃ y sáº½ biáº¿n máº¥t khá»i "hÃ ng Ä‘á»£i" cá»§a nhÃ¢n viÃªn.

ğŸ” Táº¡i sao cÃ¡c cá»™t láº¡i quan trá»ng?
type: Cá»™t nÃ y ráº¥t quan trá»ng. NÃ³ cho nhÃ¢n viÃªn biáº¿t pháº£i lÃ m gÃ¬.

type = "ProductPurchase": "Mang product_id Ä‘áº¿n cho khÃ¡ch."

type = "TopUp": "Mang mÃ¡y POS (hoáº·c Ä‘áº¿n thu tiá»n máº·t) Ä‘á»ƒ náº¡p amount tiá»n vÃ o tÃ i khoáº£n khÃ¡ch."

type = "Help": "KhÃ¡ch cáº§n trá»£ giÃºp ká»¹ thuáº­t (há»ng chuá»™t, lag...)"

status: ÄÃ¢y lÃ  cá»™t "vÃ²ng Ä‘á»i" cá»§a yÃªu cáº§u.

Pending (Äang chá»): Má»›i táº¡o, chÆ°a ai nháº­n.

Processing (Äang xá»­ lÃ½): NhÃ¢n viÃªn Ä‘Ã£ nháº­n, Ä‘ang Ä‘i láº¥y Ä‘á»“. (TÃ¹y chá»n)

Completed (ÄÃ£ hoÃ n thÃ nh): ÄÃ£ giao hÃ ng/xá»­ lÃ½ xong.

Cancelled (ÄÃ£ há»§y): KhÃ¡ch hÃ ng há»§y, hoáº·c nhÃ¢n viÃªn há»§y (háº¿t hÃ ng).

session_id / customer_id: GiÃºp xÃ¡c Ä‘á»‹nh chÃ­nh xÃ¡c ai vÃ  á»Ÿ Ä‘Ã¢u Ä‘ang gá»i.

Má»‘i quan há»‡ vá»›i Invoice (HÃ³a Ä‘Æ¡n)
ÄÃ¢y lÃ  Ä‘iá»ƒm báº¡n cáº§n phÃ¢n biá»‡t rÃµ:

ServiceRequest ğŸ›’: LÃ  YÃŠU Cáº¦U (CÃ¡i "order").

InvoiceDetail ğŸ§¾: LÃ  CHI TIáº¾T THANH TOÃN (CÃ¡i "dÃ²ng trÃªn hÃ³a Ä‘Æ¡n").

Khi khÃ¡ch hÃ ng thanh toÃ¡n lÃºc cuá»‘i giá», há»‡ thá»‘ng sáº½:

NhÃ¬n vÃ o UsageSession Ä‘á»ƒ láº¥y tiá»n giá» chÆ¡i.

NhÃ¬n vÃ o táº¥t cáº£ ServiceRequest cÃ³ status = "Completed" vÃ  type = "ProductPurchase" thuá»™c session_id Ä‘Ã³.

Vá»›i má»—i ServiceRequest (nhÆ° lon Coca á»Ÿ trÃªn), nÃ³ sáº½ táº¡o má»™t dÃ²ng InvoiceDetail tÆ°Æ¡ng á»©ng.

NÃ³i cÃ¡ch khÃ¡c, ServiceRequest lÃ  Ä‘áº§u vÃ o Ä‘á»ƒ táº¡o ra InvoiceDetail khi tÃ­nh tiá»n.

Báº¡n cÃ³ tháº¥y luá»“ng hoáº¡t Ä‘á»™ng nÃ y há»£p lÃ½ vÃ  rÃµ rÃ ng hÆ¡n khÃ´ng?